@page "/areapessoal"
@inject NavigationManager Navigation

@*@inject AuthenticationStateProvider AuthenticationStateProvider

<head>
    <link href="/areapessoal.css" rel="stylesheet">
</head>

<div class="botao-container">
    <h2>A Minha Conta</h2>

    @if (isLoggedIn)
    {
        <!-- Área quando o utilizador está logado -->
        <div class="user">
            <img src="user.png" alt="Utilizador">
        </div>
        <NavLink href="/dados-pessoais" class="botao">Dados Pessoais</NavLink>
        <NavLink href="/modificar-dados-pessoais" class="botao">Modificar Dados Pessoais</NavLink>
        <NavLink href="/minhas-encomendas" class="botao">As Minhas Encomendas</NavLink>
        <a @onclick="Logout" class="botao">Terminar Sessão</a>
    }
    else
    {
        <!-- Área para quando o utilizador não está logado -->
        <NavLink href="/Login"</NavLink>
    }
</div> 



@code {

    private bool isLoggedIn;

    protected override async Task OnInitializedAsync()
    {
        // Obtém o estado de autenticação do utilizador
        var authState = await AuthenticationStateProvider.GetAuthenticationStateAsync();
        var user = authState.User;

        // Define se o utilizador está autenticado
        isLoggedIn = user.Identity != null && user.Identity.IsAuthenticated;
    }

    private void Logout()
    {
        // Exemplo de logout: Redirecionar para a página de logout (ou lógica personalizada)
        Navigation.NavigateTo("/logout", forceLoad: true);
    } 
}
 *@

<head>
    <link href="css/areapessoal.css" rel="stylesheet" />
</head>

<div class="botao-container">
    <h2>A Minha Conta</h2>
    <div class="user">
        <img src="images/user.png" alt="Utilizador">
    </div>
    <a href="#" class="botao">Dados Pessoais</a>
    <a href="#" class="botao">Modificar Dados Pessoais</a>
    <a href="#" class="botao">As Minhas Encomendas</a>
    <a href="#" class="botao">Terminar Sessão</a>
    <p>Se já tem conta, <a class="a-criar-login" href="/login"> faça login.</a> Senão, faça o seu registo em <a class="a-criar-login" href="/registo">criar conta</a></p>
</div>